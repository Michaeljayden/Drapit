{% comment %}
  Drapit Virtual Try-On Button
  This block adds the Drapit widget to the product page.
{% endcomment %}

<script
  src="https://drapit.io/widget/drapit-widget.js"
  data-drapit-key="{{ block.settings.api_key }}"
  data-drapit-color="{{ block.settings.button_color }}"
  data-drapit-cta="{{ block.settings.button_text }}"
  defer
></script>

<div class="drapit-product-container"
  data-drapit-product="https:{{ product.featured_image | img_url: 'grande' }}"
  data-drapit-product-id="{{ product.variants.first.sku | default: product.id }}"
  data-drapit-product-name="{{ product.title }}"
  data-drapit-buy-url="{{ shop.url }}{{ product.url }}"
></div>

{% schema %}
{
  "name": "Drapit Try-On",
  "target": "section",
  "enabled_on": {
    "templates": ["product"]
  },
  "settings": [
    {
      "type": "text",
      "id": "api_key",
      "label": "Drapit API Key",
      "default": "dk_live_..."
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Button Color",
      "default": "#1D6FD8"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Virtueel passen"
    }
  ]
}
{% endschema %}
